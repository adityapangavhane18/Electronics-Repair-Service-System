<!DOCTYPE html>
<html>
<head>
  <title>All Service Requests</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    img.thumb { width: 100px; border-radius: 8px; }
  </style>
</head>
<body class="bg-light">
<div class="container mt-5">
  <h2 class="mb-4">All Service Requests</h2>
  <table class="table table-bordered table-striped shadow-sm bg-white">
    <thead class="table-dark">
      <tr>
        <th>User</th>
        <th>Serial No.</th>
        <th>Product</th>
        <th>Date</th>
        <th>Description</th>
        <th>Photo</th>
        <th>Submitted</th>
        <th>Status</th>
<th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for r in requests %}
      <tr>
        <td>{{ r.user.username }}</td>
        <td>{{ r.serial_number }}</td>
        <td>{{ r.product_name }}</td>
        <td>{{ r.date_of_purchase }}</td>
        <td>{{ r.fault_description }}</td>
        <td>
          {% if r.photo %}
            <img src="{{ r.photo.url }}" class="thumb">
          {% else %}
            No image
          {% endif %}
        </td>
        <td>{{ r.submitted_at|date:"d M Y, H:i" }}</td>
        <td>{{ r.get_status_display }}</td>
        <td>
  <a href="{% url 'update_status' r.id %}" class="btn btn-sm btn-outline-primary">Update</a>
</td>

      </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{% url 'dashboard' %}" class="btn btn-secondary mt-3">Back to Dashboard</a>
</div>
</body>
</html>